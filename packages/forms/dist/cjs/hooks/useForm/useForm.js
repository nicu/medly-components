"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),n=e(require("@babel/runtime/helpers/defineProperty")),r=require("../../helpers/createDottedKeyObject.js"),u=require("../../helpers/createObjectFromDottedKeys.js"),a=e(require("@babel/runtime/helpers/slicedToArray")),c=require("@medly-components/utils"),o=require("date-fns"),i=e(require("fast-memoize"));function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){n(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}exports.useForm=function(e){var l=t.useState(r.createDottedKeyObject(e)),f=a(l,2),d=f[0],b=f[1],y=t.useState({}),h=a(y,2),p=h[0],C=h[1],g=t.useState(0),D=a(g,2),m=D[0],O=D[1];c.useUpdateEffect((function(){b(r.createDottedKeyObject(e))}),[e]);var j=t.useCallback((function(e,t){C((function(r){return s(s({},r),{},n({},e,t))}))}),[]),k=t.useCallback(i((function(e,t,n){return{startDate:e?e instanceof Date?e:c.parseToDate(e,n||"MM/dd/yyyy"):null,endDate:t?t instanceof Date?t:c.parseToDate(t,n||"MM/dd/yyyy"):null}})),[]),v=t.useCallback(i((function(e,t){return function(n){j(e,""),t&&t(n)}})),[]),M=t.useCallback(i((function(e){return function(t){t.preventDefault(),e(u.createObjectFromDottedKeys(d))}})),[d,p]),P=t.useCallback(i((function(e){return function(t){t.preventDefault(),b({}),C({}),O((function(e){return e+1})),e&&e(t)}})),[]),F=t.useCallback((function(e,t){b((function(r){return s(s({},r),{},n({},e,t))}))}),[]),S=t.useCallback(i((function(e){return function(t){var r=t.target.value;b((function(t){return s(s({},t),{},n({},e,r))}))}})),[]),q=t.useCallback(i((function(e){return function(t){var r=t.target.value;b((function(t){return s(s({},t),{},n({},e,""!==r?Number(r):void 0))}))}})),[]),w=t.useCallback(i((function(e){return function(t){return b((function(r){return s(s({},r),{},n({},e,t))}))}})),[]),K=t.useCallback(i((function(e){return function(t){return b((function(r){return s(s({},r),{},n({},e,t))}))}})),[]),x=t.useCallback(i((function(e){return function(t){var r=t.target.checked;b((function(t){return s(s({},t),{},n({},e,r))}))}})),[]),E=t.useCallback(i((function(e,t){return function(r){b((function(u){return s(s({},u),{},n({},e,r?o.format(r,t||"MM/dd/yyyy"):""))}))}})),[]),R=t.useCallback(i((function(e,t){return function(r){b((function(u){var a;return s(s({},u),{},(n(a={},"".concat(e,".startDate"),r.startDate?o.format(r.startDate,t||"MM/dd/yyyy"):""),n(a,"".concat(e,".endDate"),r.endDate?o.format(r.endDate,t||"MM/dd/yyyy"):""),a))}))}})),[]),T=t.useCallback(i((function(e,t){return function(r){t&&Array.from(r).find((function(e){return e.size>t}))?j(e,"File size should be less then ".concat(t/1e6,"MB")):b((function(t){return s(s({},t),{},n({},e,r))}))}})),[]),z=t.useCallback(i((function(){return function(e){b((function(t){return Object.keys(t||{}).filter((function(t){return t!==e})).reduce((function(e,n){return e[n]=t[n],e}),{})}))}})),[]);return{formKey:m,values:d,setValues:b,errorMessages:p,addErrorMessage:j,setErrorMessages:C,handlers:{handleFormReset:P,handleFormSubmit:M,handleFocus:v,handleTextChange:S,handleNumberChange:q,handleFileChange:T,handleCheckboxChange:x,handleDateChange:E,handleDateRangeChange:R,getPeriodFromDates:k,handleCheckboxGroupChange:K,handleRadioGroupChange:w,handleSingleSelectChange:w,handleMultiSelectChange:K,handleChange:F,handleRemoveField:z}}};
