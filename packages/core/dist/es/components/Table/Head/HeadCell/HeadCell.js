import e from"@babel/runtime/helpers/objectWithoutProperties";import{jsx as n,jsxs as i,Fragment as t}from"react/jsx-runtime";import{memo as o,useRef as r,useState as d,useEffect as l,useCallback as c,useMemo as u,Children as a}from"react";import s from"@babel/runtime/helpers/slicedToArray";import{DropdownIcon as m,ArrowDropDownIcon as f,ArrowDropUpIcon as v}from"@medly-components/icons";import{isValidStringOrNumber as h}from"@medly-components/utils";import{Text as p}from"../../../Text/Text.js";import{HeadCellStyled as b,HeadCellButton as g,ResizeHandler as S}from"./HeadCell.styled.js";var z=o((function(o){var z,C,w=o.align,y=o.frozen,x=o.sortable,j=o.children,L=o.hidden,W=o.field,M=o.isLoading,O=o.sortField,D=o.onSortChange,E=o.defaultSortOrder,T=o.onWidthChange,H=o.columnMaxSize,R=o.tableSize,q=o.hiddenDivRef,A=o.addColumnMaxSize,F=e(o,["align","frozen","sortable","children","hidden","field","isLoading","sortField","onSortChange","defaultSortOrder","onWidthChange","columnMaxSize","tableSize","hiddenDivRef","addColumnMaxSize"]),k=r(null),X=d(null!=E?E:"desc"),B=s(X,2),N=B[0],P=B[1];l((function(){O!==W&&P("desc")}),[O]),l((function(){k&&o.fitContent&&T(H,W)}),[H]),l((function(){var e,n;(null===(e=k.current)||void 0===e?void 0:e.clientWidth)&&T(null===(n=k.current)||void 0===n?void 0:n.clientWidth,W)}),[null===(z=k.current)||void 0===z?void 0:z.clientWidth]),l((function(){if(!M&&A&&q.current){q.current.innerHTML=j;var e=q.current.clientWidth;e>0&&A(W,e+("L"===R?72:56))}}),[j,M,A,R]);var G=function(e){requestAnimationFrame((function(){if(k.current){var n=C-k.current.getBoundingClientRect().left+(e.pageX-C+2);T(n,W)}}))},I=c((function(){if(x&&!M){var e="asc"===N?"desc":"asc";P(e),D&&D(W,e)}}),[M,x,N,D,W]),J=function e(){window.removeEventListener("mousemove",G),window.removeEventListener("mouseup",e),document.querySelector("body").style.cursor="auto"},K=c((function(e){e.preventDefault(),T(H,W)}),[H,W]),Q=u((function(){return n(O!==W?m:"desc"===N?f:v,{size:"S"},void 0)}),[O,W,N]);return n(b,Object.assign({as:"th",ref:k,frozen:y,hidden:L},F,{tableSize:R},{children:j&&i(t,{children:[a.map(j,(function(e){return h(e)?i(g,Object.assign({align:w,tableSize:R,onClick:I,isSelected:O===W&&!M,withHoverEffect:x&&!M},{children:[n(p,Object.assign({uppercase:!0},{children:e}),void 0),x&&Q]}),void 0):e})),!F.isRowActionCell&&n(S,{onMouseDown:function(e){C=e.pageX,window.addEventListener("mousemove",G),window.addEventListener("mouseup",J),document.querySelector("body").style.cursor="ew-resize"},onDoubleClick:K},void 0)]},void 0)}),void 0)}));z.displayName="HeadCell";var C=Object.assign(z,{Style:b});export default C;
