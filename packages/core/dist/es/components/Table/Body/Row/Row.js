import e from"@babel/runtime/helpers/objectWithoutProperties";import{jsx as o,Fragment as i,jsxs as n}from"react/jsx-runtime";import{memo as t,useState as r,useContext as d,useMemo as l,useCallback as a,useRef as s,useEffect as c}from"react";import w from"@babel/runtime/helpers/slicedToArray";import u from"@babel/runtime/helpers/toConsumableArray";import{TableComponentsCommonPropsContext as m}from"../../context/TableComponentsCommonProps.context.js";import{getGridTemplateColumns as p,getNestedValue as f}from"../../helpers.js";import{GroupCell as R}from"../../GroupCell/GroupCell.styled.js";import h from"../Cell/Cell.js";import{ExtendedRowCell as C}from"../Cell/ExtendedRowCell/ExtendedRowCell.js";import{RowActionsCell as b}from"../Cell/RowActionsCell/RowActionsCell.js";import{RowHoverActionsCell as v}from"../Cell/RowHoverActionsCell/RowHoverActionsCell.js";import{Row as S}from"./Row.styled.js";var x=t((function(t){var x=r(!1),g=w(x,2),y=g[0],E=g[1],j=t.id,A=t.data,D=t.isNavigated,k=void 0!==D&&D,z=t.isRowExpandedFromKeyboard,K=t.isRowCollapsedFromKeyboard,F=t.showShadowAfterFrozenElement,I=t.selectedRowIds,N=t.onRowSelection,T=e(t,["id","data","isNavigated","isRowExpandedFromKeyboard","isRowCollapsedFromKeyboard","showShadowAfterFrozenElement","selectedRowIds","onRowSelection"]),G=d(m),H=G.keyBindings,L=G.columns,M=G.isLoading,O=G.onRowClick,W=G.hiddenDivRef,P=G.addColumnMaxSize,q=G.rowClickDisableKey,B=G.rowSelectionDisableKey,J=G.defaultRowExpandKey,Q=G.isRowSelectable,U=G.isRowExpandable,V=G.isGroupedTable,X=G.showRowWithCardStyle,Y=G.size,Z=G.expandedRowComponent,$=G.withRowSeparators,_=G.rowHoverActions,ee=r(J&&A[J]),oe=w(ee,2),ie=oe[0],ne=oe[1],te=l((function(){return!M&&I.includes(j)}),[j,M,I]),re=l((function(){return q&&A[q]}),[A,q]),de=l((function(){return B&&A[B]}),[A,B]),le=a((function(){return N(j)}),[j,N]),ae=a((function(){return ne((function(e){return!e}))}),[]),se=l((function(){return M||!O||re?void 0:function(){return O(A)}}),[M,A,O,re,U,ae]),ce=a((function(){return E(!0)}),[]),we=a((function(){return E(!1)}),[]),ue=s(null),me=a((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:L,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return i.reduce((function(i,t){var r="".concat(n&&"".concat(n,".")).concat(t.field);return"row-actions"===t.field?i:[].concat(u(i),[t.children?o(R,Object.assign({as:n?"div":"td",hidden:t.hidden,gridTemplateColumns:p(t.children)},{children:me(e[t.field],t.children,t.field)}),t.field):o(h,{rowId:j,config:t,as:n?"div":"td",isLoading:M,rowData:e,data:f(e,t.field),addColumnMaxSize:P,isRowClickDisabled:re,dottedFieldName:r,tableSize:Y,hiddenDivRef:W},r)])}),[])}),[j,A,M,L,P,re,W,Y]);c((function(){var e,o,i;k&&(Q&&!de?null===(e=ue.current)||void 0===e||null===(o=e.querySelector("input"))||void 0===o||o.focus():null===(i=ue.current)||void 0===i||i.focus())}),[k]),c((function(){z&&ne(!0)}),[z]),c((function(){K&&ne(!1)}),[K]);var pe=a((function(e){e.key===H.rowClick&&k&&se&&se()}),[k,se]);return o(i,{children:n(S,Object.assign({},T,{ref:ue,tabIndex:Number(j),disabled:re,onClick:se,isSelected:te,isExpanded:ie,isExpandable:U,showRowWithCardStyle:X,gridTemplateColumns:p(L),onMouseEnter:ce,onMouseLeave:we,withRowSeparators:$,isNavigated:k,onKeyDown:pe},{children:[(Q||U)&&o(b,{tableSize:Y,isLoading:M,isRowExpanded:ie,isGroupedTable:V,isRowExpandable:U,isRowSelected:te,isRowSelectable:Q,isRowSelectionDisabled:de,onRowSelection:le,onRowExpansionIconClick:ae,showShadowAtRight:F,isNavigated:k},void 0),me(A),U&&Z&&o(C,{rowId:j,rowData:A,tableSize:Y,isRowExpanded:ie,isRowSelected:te,isGroupedTable:V,expandedRowComponent:Z,isRowClickDisabled:re,showShadowAtRight:F},void 0),void 0!==_&&!re&&!M&&o(v,Object.assign({show:y},{children:o(_,{rowData:A,rowId:j},void 0)}),void 0)]}),void 0)},void 0)}));x.displayName="Row";export{x as Row};
