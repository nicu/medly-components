import e from"@babel/runtime/helpers/objectWithoutProperties";import{jsxs as o,jsx as t}from"react/jsx-runtime";import{memo as r,useContext as i,useState as n,useMemo as s,useEffect as l}from"react";import p from"@babel/runtime/helpers/slicedToArray";import{useKeyPress as c}from"@medly-components/utils";import d from"@babel/runtime/helpers/defineProperty";import{TableComponentsCommonPropsContext as a}from"../context/TableComponentsCommonProps.context.js";import{getGridTemplateColumns as m}from"../helpers.js";import{Minimap as u}from"../Minimap/Minimap.js";import{TBody as w}from"./Body.styled.js";import{NoResultRow as f,NoResultCell as b}from"./Row/Row.styled.js";import{Row as R}from"./Row/Row.js";import{GroupedRow as y}from"./GroupedRow/GroupedRow.js";function h(e,o){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);o&&(r=r.filter((function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable}))),t.push.apply(t,r)}return t}function j(e){for(var o=1;o<arguments.length;o++){var t=null!=arguments[o]?arguments[o]:{};o%2?h(Object(t),!0).forEach((function(o){d(e,o,t[o])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):h(Object(t)).forEach((function(o){Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}return e}var O=r((function(r){var d,h,O=i(a),g=O.data,v=O.groupBy,S=O.rowIdentifier,P=O.showRowWithCardStyle,I=O.noResultRow,x=O.noResultRowText,D=O.tableRef,C=O.withMinimap,G=O.columns,N=O.size,T=O.keyBindings,M=r.selectedRowIds,B=r.onRowSelection,W=r.onGroupedRowSelection,q=r.setUniqueIds,E=e(r,["selectedRowIds","onRowSelection","onGroupedRowSelection","setUniqueIds"]),U=n(-1),k=p(U,2),z=k[0],F=k[1],K=null!==(d=null===(h=D.current)||void 0===h?void 0:h.clientWidth)&&void 0!==d?d:0,A=s((function(){return[G]}),[G]),H=c(T.up,!1,D),J=c(T.down,!1,D),L=c(T.expandRow,!1,D),Q=c(T.collapseRow,!1,D);return l((function(){g.length&&H&&F((function(e){return e>0?e-1:e}))}),[H,g]),l((function(){g.length&&J&&F((function(e){return e<g.length-1?e+1:e}))}),[J,g]),o(w,{children:[0===g.length&&(I||t(f,Object.assign({showRowWithCardStyle:P,gridTemplateColumns:m(G),withMinimap:C},{children:t(b,Object.assign({width:K,tableSize:N},{children:x||"No result"}),void 0)}),void 0)),g.map((function(e,o){var r=(v?e[v]:e[S])||o,i=isNaN(Number(r))?o:r;return v?t(y,Object.assign({id:i,titleRowData:e,setUniqueIds:q,selectedTitleRowIds:M,onTitleRowSelection:B},j(j({},E),{},{onGroupedRowSelection:W})),r):t(R,Object.assign({id:i,data:e,selectedRowIds:M,onRowSelection:B,isNavigated:o===z,isRowExpandedFromKeyboard:L&&o===z,isRowCollapsedFromKeyboard:Q&&o===z},E),r)})),C&&t(u,{tableRef:D,minimapDimensionDeps:A},void 0)]},void 0)}));O.displayName="Body";export default O;
