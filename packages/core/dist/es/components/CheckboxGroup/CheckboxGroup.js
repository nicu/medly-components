import e from"@babel/runtime/helpers/objectWithoutProperties";import{jsxs as r,jsx as t}from"react/jsx-runtime";import{memo as o,forwardRef as n,useState as l,useMemo as i,useRef as a,useCallback as c}from"react";import s from"@babel/runtime/helpers/slicedToArray";import{useCombinedRefs as u}from"@medly-components/utils";import d from"@babel/runtime/helpers/defineProperty";import p from"@babel/runtime/helpers/toConsumableArray";import{SelectorGroup as b}from"../Selectors/Selectors.styled.js";import{Checkbox as h}from"../Checkbox/Checkbox.js";import f from"./getValuesFromOptions.js";import{useKeyboardNavigation as m}from"./useKeyboardNavigation.js";function v(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?v(Object(t),!0).forEach((function(r){d(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var O=o(n((function(o,n){var d=o.id,v=o.values,g=o.onChange,j=o.options,x=o.size,P=o.label,k=o.labelVariant,H=o.labelWeight,S=o.showSelectAll,T=o.disabled,w=o.errorText,W=o.helperText,C=o.columns,E=o.required,A=o.validator,V=o.parentHasError,I=o.fullWidthOptions,z=o.isHovered,B=o.setIsHovered,D=e(o,["id","values","onChange","options","size","label","labelVariant","labelWeight","showSelectAll","disabled","errorText","helperText","columns","required","validator","parentHasError","fullWidthOptions","isHovered","setIsHovered"]),K=l(-2),q=s(K,2),N=q[0],F=q[1],G=l(""),L=s(G,2),M=L[0],R=L[1],J=i((function(){return d||P}),[d,P]),Q=u(n,a(null)),U=i((function(){return!!w||!!M||V}),[M,w,V]),X=i((function(){return!(!w&&!W)}),[w,W]),Y=i((function(){return f(j)}),[j]),Z=i((function(){return Y.every((function(e){return null==v?void 0:v.includes(e)}))}),[j,v]),$=c((function(e){var r=A&&A(e)||E&&0===e.length&&"Please select at least one option."||"";R(r)}),[A]),_=c((function(e){var r=e.currentTarget;setTimeout((function(){return!r.contains(document.activeElement)&&$(v)}),0),o.onBlur&&o.onBlur(e)}),[$,v,o.onBlur]),ee=c((function(e){return function(r){var t=r?[].concat(p(v),[e]):v.filter((function(r){return r!==e}));$(t),g(t)}}),[v,g]),re=c((function(e){e.stopPropagation();var r=e.target,t=r.name,o=r.checked;ee(t)(o)}),[ee]),te=c((function(){var e=Z?v.filter((function(e){return!Y.includes(e)})):Array.from(new Set([].concat(p(v),p(Y))));$(e),g(e)}),[j,v,g]),oe=m({cursor:N,setCursor:F,isHovered:z,setIsHovered:B,checkboxGroupRef:Q,options:j,handleSelectAllClick:te}).isSelectionKeyPressed,ne=i((function(){return!Z&&Y.some((function(e){return null==v?void 0:v.includes(e)}))}),[Z,Y,oe]);return r(b.Wrapper,Object.assign({ref:Q,id:"".concat(J,"-wrapper"),"aria-describedby":"".concat(J,"-helper-text")},y(y({},D),{},{hasHelperOrErrorText:X,onBlur:_,type:"checkbox"}),{children:[P&&(S?t(h,Object.assign({label:P,checked:Z,onChange:te,indeterminate:ne,id:"".concat(J,"-select-all"),isHovered:-1===N},{size:x,hasError:U,disabled:T,labelVariant:k,labelWeight:H}),"select-all"):t(b.Label,Object.assign({id:"".concat(J,"-label"),type:"checkbox",hasError:U,required:E,disabled:T,textVariant:k,textWeight:H},{children:P}),void 0)),(w||M||W)&&t(b.HelperText,Object.assign({id:"".concat(J,"-helper-text"),type:"checkbox",disabled:T,hasError:U,isIndented:S},{children:w||M||W}),void 0),t(b.Options,Object.assign({id:"".concat(J,"-options"),columns:C,isIndented:S,fullWidthOptions:I},{children:j.map((function(e,r){var n;return Array.isArray(e.value)?t(O,Object.assign({parentHasError:U,id:"".concat(e.label,"-").concat(J)},y(y({},o),{},{showSelectAll:null===(n=e.showSelectAll)||void 0===n||n,options:e.value,label:e.label,columns:e.columns,helperText:e.helperText,errorText:e.errorText})),e.label):t(h,{size:x,name:e.value,label:e.label,checked:null==v?void 0:v.includes(e.value),onChange:re,disabled:T||e.disabled,hasError:U,id:"".concat(e.label,"-").concat(J),isHovered:z&&N===r,onSelectionFromKeyboard:ee(e.value)},e.value)}))}),void 0)]}),void 0)})));O.displayName="CheckboxGroup",O.defaultProps={values:[],columns:1,fullWidthOptions:!1,labelVariant:"body1",labelWeight:"Medium"};var g=Object.assign(O,{Style:b.Wrapper});export{g as CheckboxGroup};
