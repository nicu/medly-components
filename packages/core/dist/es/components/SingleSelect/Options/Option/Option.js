import{jsxs as e,jsx as t}from"react/jsx-runtime";import{memo as r,useRef as o,useState as i,useCallback as n,useEffect as a,isValidElement as s}from"react";import{withTheme as l}from"styled-components";import d from"@babel/runtime/helpers/slicedToArray";import{ArrowRightIcon as c,CheckIcon as m}from"@medly-components/icons";import{useKeyPress as u,useOuterClickNotifier as p}from"@medly-components/utils";import{Text as f}from"../../../Text/Text.js";import{OptionStyled as v,CustomComponentWrapper as h}from"./Option.styled.js";import b from"../Options.js";var y=r((function(r){var l=o(null),y=i(!1),x=d(y,2),g=x[0],O=x[1],j=r.value,A=r.theme,E=r.label,k=r.disabled,M=r.selected,N=r.onClick,T=r.hasError,W=r.hovered,w=r.size,z=r.variant,C=r.maxWidth,S=r.includesNestedOptions,V=E.replace(/ /g,"-"),L=u("Enter"),R=u("ArrowLeft"),I=u("ArrowRight"),P=Array.isArray(j),q=n((function(){return O(!0)}),[]),B=n((function(){return O(!1)}),[]),D=n((function(e){e.stopPropagation(),P&&q(),N({value:j,label:E,disabled:k,selected:M})}),[P,k,N]);return a((function(){var e;(M||W)&&(null===(e=l.current)||void 0===e||e.scrollIntoView({block:"nearest"}))}),[M,W]),a((function(){!k&&P&&W&&((I||L)&&q(),R&&!j.find((function(e){return e.hovered&&Array.isArray(e.value)}))&&B())}),[j,k,P,W,R,I,L]),p((function(){return B()}),l),e(v,Object.assign({id:V,ref:l,disabled:k,selected:M,variant:z,hasError:T,hovered:W,maxWidth:C,onClick:D,onMouseEnter:q,onMouseLeave:B},{children:[s(j)&&!P?t(h,{children:j},void 0):t(f,Object.assign({textWeight:M?"Medium":"Regular",textVariant:"flat"===z?"body3":A.singleSelect.option.textVariant[w]},{children:E}),void 0),P?t(c,{size:"flat"===z?"S":"M"},void 0):M&&"flat"!==z&&t(m,{},void 0),g&&P&&t(b,{isNested:!0,size:w,id:"".concat(V,"-options"),options:j,variant:z,onOptionClick:N,hasError:T,maxWidth:C,includesNestedOptions:S},void 0)]}),void 0)}));y.displayName="Option";var x=l(Object.assign(y,{Style:v}));export default x;
