import{useRef as r,useState as e,useCallback as n,useEffect as t}from"react";import o from"@babel/runtime/helpers/slicedToArray";import{useKeyPress as u}from"@medly-components/utils";import{getUpdatedOptions as i,getNextOption as c,getPrevOption as l}from"./helpers.js";var s=function(s){var a=s.isFocused,f=s.selectedOption,p=void 0===f?{value:"",label:""}:f,v=s.setOptions,d=s.options,m=s.areOptionsVisible,h=s.handleOptionClick,A=s.showOptions,b=s.optionsRef,w=s.hideOptions,y=u("ArrowDown"),O=u("ArrowLeft"),g=u("ArrowRight"),T=u("ArrowUp"),R=u("Enter"),j=u("Tab"),k=r([]),x=e(p),C=o(x,2),D=C[0],E=C[1],F=n((function(r){E(r),v(i(d,r,"hovered"))}),[d]);t((function(){m||(k.current=[])}),[m]),t((function(){if(a.current&&(y||T)){var r,e=null===(r=k.current.slice(-1)[0])||void 0===r?void 0:r.value,n=e?D:d.find((function(r){return r.hovered}))||d.find((function(r){return r.selected}))||{value:"",label:""},t=y?c:l;d.length&&m?F(t(n,e||d)):A()}}),[y,T,m]),t((function(){a.current&&g&&m&&Array.isArray(D.value)&&(k.current.push(D),(!D.value.some((function(r){return r.hovered}))||!D.value.some((function(r){return r.selected})))&&F(D.value[0]))}),[g,m,D]),t((function(){a.current&&O&&m&&k.current.length>0&&F(k.current.pop())}),[O,m]),t((function(){a.current&&j&&b.current&&(a.current=!1,setTimeout((function(){return!a.current&&w&&w()}),250))}),[j]),t((function(){a.current&&R&&b.current&&d.length>0&&!Array.isArray(D.value)&&h(D)}),[R])};export{s as useKeyboardNavigation};
