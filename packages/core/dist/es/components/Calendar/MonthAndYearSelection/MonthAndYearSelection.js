import e from"@babel/runtime/helpers/objectWithoutProperties";import{jsxs as r,jsx as t}from"react/jsx-runtime";import{memo as n,useCallback as o,useMemo as a}from"react";import{useUpdateEffect as i}from"@medly-components/utils";import l from"@babel/runtime/helpers/toConsumableArray";import{getMonthAndYearFromDate as c}from"../helper.js";import{SingleSelect as m}from"../../SingleSelect/SingleSelect.js";import{SHORT_CALENDAR_MONTHS as s}from"../constants.js";import{Wrapper as u}from"./MonthAndYearSelection.styled.js";var h=n((function(n){var h=n.id,p=n.month,d=n.year,f=n.onChange,b=n.minSelectableDate,v=n.maxSelectableDate,S=n.isErrorPresent,y=e(n,["id","month","year","onChange","minSelectableDate","maxSelectableDate","isErrorPresent"]),g=c(b),j=g.month,x=g.year,C=c(v),D=C.month,A=C.year,P=o((function(e){return e.stopPropagation()}),[]),M=o((function(e){return f({year:d,month:e})}),[d,f]),W=o((function(e){return f({month:p,year:e})}),[p,f]),Y=a((function(){return s.reduce((function(e,r,t){var n=new Date(d,t,1)>v||new Date(d,t+1,0)<b;return[].concat(l(e),[{label:r,value:t,disabled:n}])}),[])}),[j,D,d]),w=a((function(){return l(Array(A-x+1)).map((function(e,r){var t=r+x;return{value:t,label:"".concat(t)}}))}),[x,A]);return i((function(){var e=Y.filter((function(e){return!e.disabled})).map((function(e){return e.value}));!e.includes(p)&&f({year:d,month:e[0]||0})}),[d]),r(u,Object.assign({},y,{onClick:P},{children:[t(m,{id:"".concat(h,"-month-selector"),size:"S",value:p,options:Y,onChange:M,placeholder:"Month",variant:"flat",minWidth:"5.6rem",errorText:S?" ":""},void 0),t(m,{id:"".concat(h,"-year-selector"),size:"S",value:d,options:w,onChange:W,placeholder:"Year",variant:"flat",minWidth:"5.6rem",errorText:S?" ":""},void 0)]}),void 0)}));h.displayName="MonthAndYearSelection";var p=Object.assign(h,{Style:u});export{p as MonthAndYearSelection};
