import e from"@babel/runtime/helpers/objectWithoutProperties";import{jsxs as t,jsx as a}from"react/jsx-runtime";import{memo as n,useContext as r,useState as o,useCallback as i,useMemo as l,useEffect as c}from"react";import d from"@babel/runtime/helpers/slicedToArray";import{KeyboardArrowLeftIcon as s,KeyboardArrowRightIcon as m}from"@medly-components/icons";import{Text as u}from"../Text/Text.js";import{endOfDay as f}from"date-fns";import{PopoverContext as h}from"../Popover/Popover.context.js";import{Calendar as b,Header as p,MonthNavigation as v,CalendarGrid as D,Date as g}from"./Calendar.styled.js";import{getMonthAndYearFromDate as S,getNextMonthAndYear as j,getPreviousMonthAndYear as y,getCalendarDates as w,isSameDay as x,isSameMonth as C}from"./helper.js";import{MonthAndYearSelection as k}from"./MonthAndYearSelection/MonthAndYearSelection.js";import{WeekDays as M}from"./WeekDays/WeekDays.js";var P=n((function(n){var P=n.date,Y=n.onChange,A=n.minSelectableDate,O=n.maxSelectableDate,T=n.isErrorPresent,W=n.defaultMonth,E=void 0===W?0:W,N=n.defaultYear,F=e(n,["date","onChange","minSelectableDate","maxSelectableDate","isErrorPresent","defaultMonth","defaultYear"]),I=new Date,q=N?new Date(N,E,1):null,z=r(h),B=d(z,2)[1],G=o(S(P||q||I)),H=d(G,2),J=H[0],K=J.month,L=J.year,Q=H[1],R=S(A),U=R.month,V=R.year,X=S(O),Z=X.month,$=X.year,_=i((function(e){return function(t){B(!1),Y(e,t)}}),[Y]),ee=i((function(){return Q(j(K,L))}),[K,L]),te=i((function(){return Q(y(K,L))}),[K,L]),ae=l((function(){return L===V&&K===U}),[K,L,U,V]),ne=l((function(){return L===$&&K===Z}),[K,L,Z,$]);return c((function(){var e=new Date(I.getFullYear(),I.getMonth(),1),t=new Date(I.getFullYear(),I.getMonth()+1,0);Q(S(P||q||(e<O&&t>A?I:A)))}),[P,A,O]),t(b,Object.assign({},F,{children:[t(p,{children:[a(k,{id:F.id,month:K,year:L,onChange:Q,minSelectableDate:A,maxSelectableDate:O,isErrorPresent:T},void 0),a(v,Object.assign({className:"calendar-month-navigation-go-back",disabled:ae,onClick:te},{children:a(s,{title:"".concat(F.id,"-navigation-backward-icon")},void 0)}),void 0),a(v,Object.assign({className:"calendar-month-navigation-go-forward",disabled:ne,onClick:ee},{children:a(m,{title:"".concat(F.id,"-navigation-forward-icon")},void 0)}),void 0)]},void 0),t(D,{children:[a(M,{},void 0),w(K,L).map((function(e,t){var n=new Date(e[0],e[1],e[2]),r=x(n,P),o=C(n,new Date(L,K,1)),i=x(n,I);return a(g,Object.assign({title:n.toDateString(),isInActiveMonth:o,isSelected:r,isCurrentDate:i,disabled:n>O||f(n)<A,onClick:_(n)},{children:a(u,{children:n.getDate()},void 0)}),t)}))]},void 0)]}),void 0)}));P.displayName="Calendar",P.defaultProps={date:null,minSelectableDate:new Date(1901,0,1),maxSelectableDate:new Date(2100,11,1)};var Y=Object.assign(P,{Style:b});export{Y as Calendar};
