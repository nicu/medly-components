import o from"@babel/runtime/helpers/objectWithoutProperties";import{jsx as r}from"react/jsx-runtime";import{memo as e,forwardRef as t,useState as i,useReducer as n,useCallback as s,useEffect as l}from"react";import a from"@babel/runtime/helpers/slicedToArray";import{useKeyPress as d}from"@medly-components/utils";import{reducer as c}from"../Modal/scrollStateReducer/scrollStateReducer.js";import{DrawerContext as m}from"./Drawer.context.js";import{Content as p}from"./Content/Content.js";import{DrawerBackground as f,DrawerStyled as h}from"./Drawer.styled.js";import{Footer as u}from"./Footer/Footer.js";import{Header as v}from"./Header/Header.js";var j=e(t((function(e,t){var p=e.id,u=e.onClose,v=e.open,j=e.width,w=e.children,y=e.withOverlay,b=e.position,C=o(e,["id","onClose","open","width","children","withOverlay","position"]),O=d("Escape"),g=i(v),P=a(g,2),F=P[0],H=P[1],S=n(c,{scrolledToTop:!0,scrolledToBottom:!1,scrollPosition:0}),T=a(S,2),x=T[0],D=T[1],k=s((function(o){return o.stopPropagation()}),[]),A=s((function(){return!v&&H(!1)}),[v]);return l((function(){v&&O&&u()}),[v,O]),l((function(){v&&H(!0)}),[v]),F?r(f,Object.assign({onClick:u,ref:t,open:v},C,{id:"".concat(p,"-overlay"),withOverlay:y},{children:r(h,Object.assign({id:p,position:b,onClick:k,width:j,open:v,onAnimationEnd:A},{children:r(m.Provider,Object.assign({value:{id:p,scrollState:x,dispatch:D,onClose:u}},{children:w}),void 0)}),void 0)}),void 0):null})));j.displayName="Drawer",j.defaultProps={id:"medly-drawer",open:!1,position:"right",width:"40rem",withOverlay:!0};var w=Object.assign(j,{Style:f,Content:p,Footer:u,Header:v});export{w as Drawer};
