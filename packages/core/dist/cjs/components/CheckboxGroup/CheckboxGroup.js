"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("@babel/runtime/helpers/objectWithoutProperties")),t=require("react/jsx-runtime"),o=require("react"),n=(e(o),e(require("@babel/runtime/helpers/slicedToArray"))),l=require("@medly-components/utils"),a=e(require("@babel/runtime/helpers/defineProperty")),i=e(require("@babel/runtime/helpers/toConsumableArray")),s=require("../Selectors/Selectors.styled.js"),c=require("../Checkbox/Checkbox.js"),u=require("./getValuesFromOptions.js"),d=require("./useKeyboardNavigation.js");function b(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);r&&(o=o.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,o)}return t}function p(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?b(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var h=o.memo(o.forwardRef((function(e,a){var b=e.id,f=e.values,v=e.onChange,m=e.options,x=e.size,j=e.label,y=e.labelVariant,O=e.labelWeight,g=e.showSelectAll,k=e.disabled,S=e.errorText,C=e.helperText,P=e.columns,q=e.required,w=e.validator,H=e.parentHasError,T=e.fullWidthOptions,W=e.isHovered,E=e.setIsHovered,A=r(e,["id","values","onChange","options","size","label","labelVariant","labelWeight","showSelectAll","disabled","errorText","helperText","columns","required","validator","parentHasError","fullWidthOptions","isHovered","setIsHovered"]),G=o.useState(-2),M=n(G,2),V=M[0],I=M[1],z=o.useState(""),B=n(z,2),D=B[0],K=B[1],R=o.useMemo((function(){return b||j}),[b,j]),N=l.useCombinedRefs(a,o.useRef(null)),F=o.useMemo((function(){return!!S||!!D||H}),[D,S,H]),_=o.useMemo((function(){return!(!S&&!C)}),[S,C]),L=o.useMemo((function(){return u(m)}),[m]),J=o.useMemo((function(){return L.every((function(e){return null==f?void 0:f.includes(e)}))}),[m,f]),Q=o.useCallback((function(e){var r=w&&w(e)||q&&0===e.length&&"Please select at least one option."||"";K(r)}),[w]),U=o.useCallback((function(r){var t=r.currentTarget;setTimeout((function(){return!t.contains(document.activeElement)&&Q(f)}),0),e.onBlur&&e.onBlur(r)}),[Q,f,e.onBlur]),X=o.useCallback((function(e){return function(r){var t=r?[].concat(i(f),[e]):f.filter((function(r){return r!==e}));Q(t),v(t)}}),[f,v]),Y=o.useCallback((function(e){e.stopPropagation();var r=e.target,t=r.name,o=r.checked;X(t)(o)}),[X]),Z=o.useCallback((function(){var e=J?f.filter((function(e){return!L.includes(e)})):Array.from(new Set([].concat(i(f),i(L))));Q(e),v(e)}),[m,f,v]),$=d.useKeyboardNavigation({cursor:V,setCursor:I,isHovered:W,setIsHovered:E,checkboxGroupRef:N,options:m,handleSelectAllClick:Z}).isSelectionKeyPressed,ee=o.useMemo((function(){return!J&&L.some((function(e){return null==f?void 0:f.includes(e)}))}),[J,L,$]);return t.jsxs(s.SelectorGroup.Wrapper,Object.assign({ref:N,id:"".concat(R,"-wrapper"),"aria-describedby":"".concat(R,"-helper-text")},p(p({},A),{},{hasHelperOrErrorText:_,onBlur:U,type:"checkbox"}),{children:[j&&(g?t.jsx(c.Checkbox,Object.assign({label:j,checked:J,onChange:Z,indeterminate:ee,id:"".concat(R,"-select-all"),isHovered:-1===V},{size:x,hasError:F,disabled:k,labelVariant:y,labelWeight:O}),"select-all"):t.jsx(s.SelectorGroup.Label,Object.assign({id:"".concat(R,"-label"),type:"checkbox",hasError:F,required:q,disabled:k,textVariant:y,textWeight:O},{children:j}),void 0)),(S||D||C)&&t.jsx(s.SelectorGroup.HelperText,Object.assign({id:"".concat(R,"-helper-text"),type:"checkbox",disabled:k,hasError:F,isIndented:g},{children:S||D||C}),void 0),t.jsx(s.SelectorGroup.Options,Object.assign({id:"".concat(R,"-options"),columns:P,isIndented:g,fullWidthOptions:T},{children:m.map((function(r,o){var n;return Array.isArray(r.value)?t.jsx(h,Object.assign({parentHasError:F,id:"".concat(r.label,"-").concat(R)},p(p({},e),{},{showSelectAll:null===(n=r.showSelectAll)||void 0===n||n,options:r.value,label:r.label,columns:r.columns,helperText:r.helperText,errorText:r.errorText})),r.label):t.jsx(c.Checkbox,{size:x,name:r.value,label:r.label,checked:null==f?void 0:f.includes(r.value),onChange:Y,disabled:k||r.disabled,hasError:F,id:"".concat(r.label,"-").concat(R),isHovered:W&&V===o,onSelectionFromKeyboard:X(r.value)},r.value)}))}),void 0)]}),void 0)})));h.displayName="CheckboxGroup",h.defaultProps={values:[],columns:1,fullWidthOptions:!1,labelVariant:"body1",labelWeight:"Medium"};var f=Object.assign(h,{Style:s.SelectorGroup.Wrapper});exports.CheckboxGroup=f;
