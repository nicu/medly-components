"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("@babel/runtime/helpers/objectWithoutProperties")),a=require("react/jsx-runtime"),n=require("react"),r=(e(n),e(require("@babel/runtime/helpers/slicedToArray"))),o=require("@medly-components/icons"),i=require("../Text/Text.js"),l=require("date-fns"),s=require("../Popover/Popover.context.js"),d=require("./Calendar.styled.js"),c=require("./helper.js"),u=require("./MonthAndYearSelection/MonthAndYearSelection.js"),h=require("./WeekDays/WeekDays.js"),m=n.memo((function(e){var m=e.date,D=e.onChange,b=e.minSelectableDate,g=e.maxSelectableDate,v=e.isErrorPresent,f=e.defaultMonth,j=void 0===f?0:f,x=e.defaultYear,M=t(e,["date","onChange","minSelectableDate","maxSelectableDate","isErrorPresent","defaultMonth","defaultYear"]),y=new Date,C=x?new Date(x,j,1):null,S=n.useContext(s.PopoverContext),p=r(S,2)[1],w=n.useState(c.getMonthAndYearFromDate(m||C||y)),A=r(w,2),Y=A[0],q=Y.month,k=Y.year,P=A[1],O=c.getMonthAndYearFromDate(b),F=O.month,N=O.year,E=c.getMonthAndYearFromDate(g),T=E.month,W=E.year,I=n.useCallback((function(e){return function(t){p(!1),D(e,t)}}),[D]),K=n.useCallback((function(){return P(c.getNextMonthAndYear(q,k))}),[q,k]),_=n.useCallback((function(){return P(c.getPreviousMonthAndYear(q,k))}),[q,k]),G=n.useMemo((function(){return k===N&&q===F}),[q,k,F,N]),H=n.useMemo((function(){return k===W&&q===T}),[q,k,T,W]);return n.useEffect((function(){var e=new Date(y.getFullYear(),y.getMonth(),1),t=new Date(y.getFullYear(),y.getMonth()+1,0);P(c.getMonthAndYearFromDate(m||C||(e<g&&t>b?y:b)))}),[m,b,g]),a.jsxs(d.Calendar,Object.assign({},M,{children:[a.jsxs(d.Header,{children:[a.jsx(u.MonthAndYearSelection,{id:M.id,month:q,year:k,onChange:P,minSelectableDate:b,maxSelectableDate:g,isErrorPresent:v},void 0),a.jsx(d.MonthNavigation,Object.assign({className:"calendar-month-navigation-go-back",disabled:G,onClick:_},{children:a.jsx(o.KeyboardArrowLeftIcon,{title:"".concat(M.id,"-navigation-backward-icon")},void 0)}),void 0),a.jsx(d.MonthNavigation,Object.assign({className:"calendar-month-navigation-go-forward",disabled:H,onClick:K},{children:a.jsx(o.KeyboardArrowRightIcon,{title:"".concat(M.id,"-navigation-forward-icon")},void 0)}),void 0)]},void 0),a.jsxs(d.CalendarGrid,{children:[a.jsx(h.WeekDays,{},void 0),c.getCalendarDates(q,k).map((function(e,t){var n=new Date(e[0],e[1],e[2]),r=c.isSameDay(n,m),o=c.isSameMonth(n,new Date(k,q,1)),s=c.isSameDay(n,y);return a.jsx(d.Date,Object.assign({title:n.toDateString(),isInActiveMonth:o,isSelected:r,isCurrentDate:s,disabled:n>g||l.endOfDay(n)<b,onClick:I(n)},{children:a.jsx(i.Text,{children:n.getDate()},void 0)}),t)}))]},void 0)]}),void 0)}));m.displayName="Calendar",m.defaultProps={date:null,minSelectableDate:new Date(1901,0,1),maxSelectableDate:new Date(2100,11,1)};var D=Object.assign(m,{Style:d.Calendar});exports.Calendar=D;
