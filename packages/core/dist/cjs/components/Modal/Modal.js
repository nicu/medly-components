"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("@babel/runtime/helpers/objectWithoutProperties")),o=require("react/jsx-runtime"),r=require("react"),n=(e(r),e(require("@babel/runtime/helpers/slicedToArray"))),i=require("@medly-components/utils"),l=e(require("@babel/runtime/helpers/defineProperty")),s=require("./scrollStateReducer/scrollStateReducer.js"),c=require("./useScrollState.js"),u=require("./Modal.context.js"),d=require("./Actions/Actions.js"),a=require("./CloseIcon/CloseIcon.styled.js"),f=require("./Content/Content.js"),p=require("./Header/Header.js"),b=require("./Modal.styled.js"),j=require("./Popup/Popup.js");function h(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function y(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?h(Object(o),!0).forEach((function(t){l(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):h(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}var m=r.memo(r.forwardRef((function(e,l){var d=e.open,f=e.onCloseModal,p=e.overflowVisible,h=e.children,m=e.minWidth,O=e.shouldCloseOnOutsideClick,v=e.minHeight,S=t(e,["open","onCloseModal","overflowVisible","children","minWidth","shouldCloseOnOutsideClick","minHeight"]),C=S.id||"medly-modal",g=i.useCombinedRefs(l,r.useRef(null)),P=i.useKeyPress("Escape",!1,g),w=r.useRef(null),q=r.useState(0),H=n(q,2),M=H[0],k=H[1],x=r.useState(),E=n(x,2),R=E[0],A=E[1],V=r.useReducer(s.reducer,{scrolledToTop:!0,scrolledToBottom:!1,scrollPosition:0}),W=n(V,2),D=W[0],I=W[1],T=r.useState(d),B=n(T,2),z=B[0],_=B[1],K=i.useWindowSize().width<768,L=r.useCallback((function(){O&&f&&f()}),[O,f]),N=r.useCallback((function(){d||(_(!1),document.body.style.overflow="unset")}),[d]);r.useEffect((function(){return d&&(_(!0),document.body.style.overflow="hidden"),function(){document.body.style.overflow="unset"}}),[d]),r.useEffect((function(){d&&P&&f&&f()}),[d,P]),r.useLayoutEffect((function(){d&&A(document.activeElement)}),[d]),r.useEffect((function(){!z&&(null==R||R.focus())}),[z]);var F=r.useRef(null),G=c.useScrollState({ref:F,scrollState:D,dispatch:I});return z?o.jsx(b.ModalBackgroundStyled,Object.assign({},y(y({},S),{},{id:C,open:d,isSmallScreen:K}),{onClick:L},{children:o.jsxs(j.Popup,Object.assign({ref:g,id:"".concat(C,"-popup"),onAnimationEnd:N},{minWidth:m,minHeight:v,open:d,overflowVisible:p},{children:[o.jsx(a.CloseIcon,{id:"".concat(C,"-close-button"),title:"".concat(C,"-close-icon"),size:"M",variant:"solid",onClick:f},void 0),o.jsx(b.InnerContainerStyled,Object.assign({id:"".concat(C,"-inner-container"),ref:w,headerHeight:M,overflowVisible:p,onScroll:G},{children:o.jsx(u.ModalContext.Provider,Object.assign({value:{headerHeight:M,setHeaderHeight:k,scrollState:D,dispatch:I,id:C,isSmallScreen:K,overflowVisible:p}},{children:h}),void 0)}),void 0)]}),void 0)}),void 0):null})));m.defaultProps={open:!1,shouldCloseOnOutsideClick:!1},m.displayName="Modal";var O=Object.assign(m,{Style:b.ModalBackgroundStyled,Header:p.Header,Popup:j.Popup,Content:f.Content,Actions:d.Actions});exports.Modal=O;
