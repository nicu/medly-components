"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("@babel/runtime/helpers/objectWithoutProperties")),t=require("react/jsx-runtime"),i=require("react"),n=(e(i),e(require("@babel/runtime/helpers/slicedToArray"))),s=require("@medly-components/icons"),o=require("@medly-components/utils"),l=require("../SingleSelect/Options/Options.js"),a=require("../SingleSelect/useKeyboardNavigation.js"),u=require("./styles/icons.js"),c=require("./SearchBox.styled.js"),d=require("./styles/customSearch.js"),h=require("./styles/input.js"),p=i.memo(i.forwardRef((function(e,p){var f=e.options,v=e.size,b=e.placeholder,m=e.onInputChange,S=e.onOptionSelected,C=e.onClear,j=e.onSearch,x=e.className,g=e.customSearchFilter,O=e.fullWidth,W=e.minWidth,k=e.maxWidth,y=r(e,["options","size","placeholder","onInputChange","onOptionSelected","onClear","onSearch","className","customSearchFilter","fullWidth","minWidth","maxWidth"]),q=i.useRef(null),z=o.useCombinedRefs(p,i.useRef(null)),I=i.useRef(!1),F=i.useRef(null),N=i.useState(!1),R=n(N,2),B=R[0],E=R[1],P=i.useState(!1),w=n(P,2),K=w[0],V=w[1],A=i.useState(f||[]),T=n(A,2),_=T[0],M=T[1],D=i.useState(!1),G=n(D,2),H=G[0],J=G[1],L=i.useState(!1),Q=n(L,2),U=Q[0],X=Q[1],Y=o.useKeyPress("Enter",!0,F);i.useEffect((function(){e.options&&(M(e.options),V(B&&e.options.length>0))}),[e.options,B]);var Z=i.useCallback((function(){var e;V(!0),null===(e=z.current)||void 0===e||e.focus()}),[]),$=i.useCallback((function(){var e;V(!1),null===(e=z.current)||void 0===e||e.blur(),E(!1)}),[]),ee=i.useCallback((function(){return J(!0)}),[]),re=i.useCallback((function(){return J(!1)}),[]),te=i.useCallback((function(){z.current&&(z.current.value="",z.current.focus()),V(!1),X(!1),E(!1),C&&C()}),[]),ie=i.useCallback((function(e){var r=e.target.value;E(0!==r.length),X(0!==r.length),m&&m(r)}),[]),ne=i.useCallback((function(e){z.current&&(z.current.value=e.label,z.current.focus()),V(!1),S&&S(e)}),[S]),se=i.useCallback((function(e){E(e.target.value.length>0),I.current=!0,_.length>0&&V(!0)}),[_]),oe=i.useCallback((function(){I.current=!1}),[]),le=i.useCallback((function(){var e;return j&&j((null===(e=z.current)||void 0===e?void 0:e.value)||"")}),[j]);a.useKeyboardNavigation({isFocused:I,options:_,areOptionsVisible:K,setOptions:M,handleOptionClick:ne,showOptions:Z,optionsRef:F}),o.useOuterClickNotifier((function(){$()}),q),i.useEffect((function(){if(Y&&I.current){var e,r,t=_.find((function(e){return!0===e.hovered}));z.current&&t&&(z.current.value=t.label,S&&S(t),z.current.blur()),j&&j((null===(e=z.current)||void 0===e?void 0:e.value)||""),V(!1),X(0!==(null===(r=z.current)||void 0===r?void 0:r.value.length)),E(!1)}}),[Y]);var ae=!!g;return t.jsxs(c.SearchBoxWrapper,Object.assign({ref:q,areOptionsVisible:K,size:v,className:x,hasCustomSearchFilter:ae,minWidth:W,fullWidth:O,maxWidth:k},{children:[t.jsx(h.SearchInput,Object.assign({placeholder:b,onChange:ie,ref:z,onFocus:se,onBlur:oe},y),void 0),U&&t.jsx(u.CloseIconWrapper,Object.assign({showCloseIcon:U,size:v,hasCustomSearchFilter:ae},{children:t.jsx(s.CloseIcon,{title:"close icon",onClick:te,size:v},void 0)}),void 0),ae&&t.jsx(u.ExpandIconWrapper,Object.assign({size:v,isCustomSearchActive:H},{children:t.jsx(s.ExpandIcon,{title:"expand icon",size:v,onClick:H?re:ee},void 0)}),void 0),t.jsx(u.SearchIconWrapper,Object.assign({areOptionsVisible:K,isTyping:B,size:v},{children:t.jsx(s.SearchIcon,{title:"search icon",size:v,onClick:le},void 0)}),void 0),K&&_&&t.jsx(l,{size:v,ref:F,options:_,variant:"filled",onOptionClick:ne,maxWidth:k},void 0),H&&t.jsx(d.CustomSearchFilterWrapper,Object.assign({size:v},{children:g}),void 0)]}),void 0)})));p.displayName="SearchBox",p.defaultProps={options:[],placeholder:"Search",size:"S",minWidth:"25.6rem",maxWidth:"100%",fullWidth:!1};var f=Object.assign(p,{Style:c.SearchBoxWrapper});exports.SearchBox=f;
