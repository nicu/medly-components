"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var r=e(require("@babel/runtime/helpers/objectWithoutProperties")),t=require("react/jsx-runtime"),i=require("react"),n=(e(i),e(require("@babel/runtime/helpers/slicedToArray"))),a=require("@medly-components/utils"),l=e(require("@babel/runtime/helpers/defineProperty")),s=require("../HelperAndErrorTextTooltip/HelperAndErrorTextTooltip.js"),o=require("./getMaskedValue.js"),u=require("./Styled/CharacterCount.styled.js"),d=require("./Styled/HelperAndErrorTextTooltipWrapper.styled.js"),c=require("./Styled/HelperText.styled.js"),p=require("./Styled/Label.styled.js"),h=require("./Styled/Prefix.styled.js"),f=require("./Styled/Suffix.styled.js"),x=require("./Styled/InnerWrapper/InnerWrapper.styled.js"),v=require("./Styled/InputWrapper.styled.js"),b=require("./Styled/MaskPlaceholder.styled.js"),j=require("./Styled/OuterWrapper.styled.js"),m=require("./Styled/TextField.styled.js");function g(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);r&&(i=i.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,i)}return t}function y(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?g(Object(t),!0).forEach((function(r){l(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):g(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}var T=i.memo(i.forwardRef((function(e,l){var g=i.useState(""),T=n(g,2),O=T[0],S=T[1],C=a.useCombinedRefs(l,i.useRef(null)),P=e.id,W=e.value,q=e.size,w=e.label,E=e.minWidth,k=e.maxWidth,z=e.fullWidth,M=e.errorText,H=e.helperText,L=e.prefix,A=e.suffix,F=e.required,I=e.disabled,D=e.showDecorators,R=e.mask,V=e.placeholder,N=e.multiline,B=e.minRows,_=e.validator,G=e.className,J=e.withCharacterCount,K=r(e,["id","value","size","label","minWidth","maxWidth","fullWidth","errorText","helperText","prefix","suffix","required","disabled","showDecorators","mask","placeholder","multiline","minRows","validator","className","withCharacterCount"]),Q=i.useMemo((function(){return P||"medly-textField"}),[P]),U=i.useMemo((function(){return!!w}),[w]),X=i.useMemo((function(){return!!L}),[L]),Y=i.useMemo((function(){return!!A}),[A]),Z=i.useMemo((function(){return!!M||!!O}),[M,O]),$=i.useMemo((function(){return!!(J&&D&&e.maxLength&&e.maxLength>=0)}),[J,D,e.maxLength]),ee=i.useState(!!W||!!K.defaultValue),re=n(ee,2),te=re[0],ie=re[1],ne=i.useState(R),ae=n(ne,2),le=ae[0],se=ae[1],oe=i.useState(0),ue=n(oe,2),de=ue[0],ce=ue[1],pe=i.useState(W?W.toString().length:K.defaultValue?K.defaultValue.toString().length:0),he=n(pe,2),fe=he[0],xe=he[1],ve=i.useCallback((function(e,r){var t;e.preventDefault();var i=e.target,n=_&&_(i.value,e)||"",a=_?n:i.validationMessage;S(a),_&&(null===(t=C.current)||void 0===t||t.setCustomValidity(n)),r&&r(e)}),[_,O]),be=i.useCallback((function(e){return e.stopPropagation()}),[]),je=i.useCallback((function(){var e;return!I&&(null===(e=C.current)||void 0===e?void 0:e.focus())}),[C,I]),me=i.useCallback((function(r){return ve(r,e.onBlur)}),[ve,e.onBlur]),ge=i.useCallback((function(r){return ve(r,e.onInvalid)}),[ve,e.onInvalid]),ye=i.useCallback((function(r){var t=r.target.value?r.target.value.toString():"";if(xe(t.length),R){var i=o.getMaskedValue(r,R);r.target.value=i,se("".concat(i).concat(R.substr(i.length)))}e.onChange&&e.onChange(r)}),[R,e.onChange]);return i.useEffect((function(){ie(!!W)}),[W]),i.useEffect((function(){R&&W&&W.toString().length===R.length&&se(W.toString())}),[W,R]),i.useEffect((function(){var e;(null===(e=C.current)||void 0===e?void 0:e.offsetWidth)&&ce(C.current.offsetWidth)}),[]),t.jsxs(j.OuterWrapper,Object.assign({fullWidth:z,minWidth:E,maxWidth:k,className:G,id:"".concat(Q,"-input-wrapper")},{children:[t.jsxs(x.InnerWrapper,Object.assign({size:q,onClick:je,variant:e.variant,disabled:I,isErrorPresent:Z,isLabelPresent:U,isTextPresent:te,minRows:B,multiline:N},{children:[!!L&&D&&t.jsx(h.Prefix,Object.assign({size:q},{children:t.jsx(L,{size:q},void 0)}),void 0),t.jsxs(v.InputWrapper,Object.assign({multiline:N,size:q,variant:e.variant},{children:[t.jsx(m.Input,Object.assign({ref:C,value:W,id:"".concat(Q,"-input"),"aria-describedby":"".concat(Q,"-helper-text"),required:F,disabled:I,placeholder:R||V||" ",isPrefixPresent:X,isSuffixPresent:Y,isLabelPresent:U,errorText:M||O,inputSize:q,variant:e.variant,as:N?"textarea":"input",multiline:N},y(y({},K),{},{onBlur:me,onInvalid:ge,onChange:ye})),void 0),le&&t.jsx(b.MaskPlaceholder,Object.assign({size:q,isLabelPresent:U,variant:e.variant},{children:le}),void 0),t.jsx(p.Label,Object.assign({inputWidth:de,htmlFor:"".concat(Q,"-input"),size:q,required:!!F,variant:e.variant,multiline:N},{children:w}),void 0),$&&e.maxLength&&t.jsx(u.CharacterCount,Object.assign({variant:e.variant,size:q,multiline:N,characterCount:fe,maxLength:e.maxLength,showTooltipForHelperAndErrorText:!!e.showTooltipForHelperAndErrorText},{children:"".concat(fe,"/").concat(e.maxLength)}),void 0)]}),void 0),e.showTooltipForHelperAndErrorText&&t.jsx(d.HelperAndErrorTextTooltipWrapper,Object.assign({size:q,displayCharacterCount:$,isSuffixPresent:Y},{children:t.jsx(s.HelperAndErrorTextTooltip,{id:Q,errorText:M||O,helperText:H},void 0)}),void 0),!!A&&D&&t.jsx(f.Suffix,Object.assign({size:q},{children:t.jsx(A,{size:q},void 0)}),void 0)]}),void 0),(Z||H)&&!e.showTooltipForHelperAndErrorText&&t.jsx(c.HelperText,Object.assign({id:"".concat(Q,"-helper-text"),onClick:be,size:q,variant:e.variant},{children:(M||O||H||"").trim()}),void 0)]}),void 0)})));T.displayName="TextField",T.defaultProps={size:"M",type:"text",variant:"filled",minWidth:"20rem",fullWidth:!1,disabled:!1,required:!1,label:"",helperText:"",errorText:"",minRows:1,withCharacterCount:!1,showDecorators:!0,showTooltipForHelperAndErrorText:!1};var O=Object.assign(T,{Style:j.OuterWrapper});exports.TextField=O;
