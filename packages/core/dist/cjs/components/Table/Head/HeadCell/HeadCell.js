"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var n=e(require("@babel/runtime/helpers/objectWithoutProperties")),i=require("react/jsx-runtime"),t=require("react"),r=(e(t),e(require("@babel/runtime/helpers/slicedToArray"))),o=require("@medly-components/icons"),d=require("@medly-components/utils"),l=require("../../../Text/Text.js"),u=require("./HeadCell.styled.js"),s=t.memo((function(e){var s,c,a=e.align,f=e.frozen,v=e.sortable,m=e.children,h=e.hidden,S=e.field,b=e.isLoading,p=e.sortField,g=e.onSortChange,C=e.defaultSortOrder,j=e.onWidthChange,x=e.columnMaxSize,w=e.tableSize,z=e.hiddenDivRef,y=e.addColumnMaxSize,q=n(e,["align","frozen","sortable","children","hidden","field","isLoading","sortField","onSortChange","defaultSortOrder","onWidthChange","columnMaxSize","tableSize","hiddenDivRef","addColumnMaxSize"]),D=t.useRef(null),E=t.useState(null!=C?C:"desc"),H=r(E,2),L=H[0],M=H[1];t.useEffect((function(){p!==S&&M("desc")}),[p]),t.useEffect((function(){D&&e.fitContent&&j(x,S)}),[x]),t.useEffect((function(){var e,n;(null===(e=D.current)||void 0===e?void 0:e.clientWidth)&&j(null===(n=D.current)||void 0===n?void 0:n.clientWidth,S)}),[null===(s=D.current)||void 0===s?void 0:s.clientWidth]),t.useEffect((function(){if(!b&&y&&z.current){z.current.innerHTML=m;var e=z.current.clientWidth;e>0&&y(S,e+("L"===w?72:56))}}),[m,b,y,w]);var O=function(e){requestAnimationFrame((function(){if(D.current){var n=c-D.current.getBoundingClientRect().left+(e.pageX-c+2);j(n,S)}}))},W=t.useCallback((function(){if(v&&!b){var e="asc"===L?"desc":"asc";M(e),g&&g(S,e)}}),[b,v,L,g,S]),R=function e(){window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",e),document.querySelector("body").style.cursor="auto"},A=t.useCallback((function(e){e.preventDefault(),j(x,S)}),[x,S]),T=t.useMemo((function(){return p!==S?i.jsx(o.DropdownIcon,{size:"S"},void 0):"desc"===L?i.jsx(o.ArrowDropDownIcon,{size:"S"},void 0):i.jsx(o.ArrowDropUpIcon,{size:"S"},void 0)}),[p,S,L]);return i.jsx(u.HeadCellStyled,Object.assign({as:"th",ref:D,frozen:f,hidden:h},q,{tableSize:w},{children:m&&i.jsxs(i.Fragment,{children:[t.Children.map(m,(function(e){return d.isValidStringOrNumber(e)?i.jsxs(u.HeadCellButton,Object.assign({align:a,tableSize:w,onClick:W,isSelected:p===S&&!b,withHoverEffect:v&&!b},{children:[i.jsx(l.Text,Object.assign({uppercase:!0},{children:e}),void 0),v&&T]}),void 0):e})),!q.isRowActionCell&&i.jsx(u.ResizeHandler,{onMouseDown:function(e){c=e.pageX,window.addEventListener("mousemove",O),window.addEventListener("mouseup",R),document.querySelector("body").style.cursor="ew-resize"},onDoubleClick:A},void 0)]},void 0)}),void 0)}));s.displayName="HeadCell";var c=Object.assign(s,{Style:u.HeadCellStyled});module.exports=c;
