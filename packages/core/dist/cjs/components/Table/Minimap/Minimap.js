"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=e(require("@babel/runtime/helpers/objectWithoutProperties")),t=require("react/jsx-runtime"),r=require("react"),i=(e(r),e(require("@babel/runtime/helpers/slicedToArray"))),o=require("@medly-components/utils"),u=e(require("@babel/runtime/helpers/toConsumableArray")),s=e(require("resize-observer-polyfill")),l=require("./Minimap.styled.js"),c=r.memo((function(e){var c=e.minimapWidth,a=e.controllerWidth,d=e.sliderContentPadding,m=e.tableRef,f=e.minimapDimensionDeps,p=n(e,["minimapWidth","controllerWidth","sliderContentPadding","tableRef","minimapDimensionDeps"]),v=r.useRef(null),b=r.useRef(null),h=r.useState(!1),w=i(h,2),E=w[0],W=w[1],g=r.useState(0),j=i(g,2),C=j[0],L=j[1],y=r.useState(0),M=i(y,2),x=M[0],D=M[1],P=r.useState(!1),S=i(P,2),q=S[0],O=S[1],R=c-a-2*d,k=r.useMemo((function(){return new Array(8).fill(null).map((function(e,n){return t.jsx(l.SliderContent,{controllerWidth:a},n)}))}),[a]),z=r.useCallback((function(){var e=m.current?m.current.scrollWidth-m.current.clientWidth:0;L(e/R),D(R/e),O(m.current&&m.current.scrollWidth>m.current.offsetWidth)}),[R]),A=r.useCallback((function(e){e&&e.stopPropagation(),!E&&v.current&&(v.current.style.left="".concat(m.current.scrollLeft*x,"px"))}),[x,E]),_=r.useCallback((function(e){if(e.stopPropagation(),b.current&&m.current&&v.current){var n=Math.round(e.clientX-b.current.getBoundingClientRect().left-a/2);n>R?n=R:n<0&&(n=0),v.current.style.left="".concat(n,"px"),m.current.scrollLeft=n*C}}),[a,C,R]),B=r.useCallback((function(e){e.stopPropagation(),e.preventDefault(),W(!0),_(e)}),[_]),N=r.useCallback((function(){W(!1),window.removeEventListener("mousemove",_)}),[_]),T=r.useMemo((function(){return new s(o.debounce((function(){z(),A()}),150))}),[z,A]);return r.useEffect((function(){if(m.current)return T.observe(m.current),function(){return T.disconnect()}}),[T,m.current]),r.useEffect((function(){z(),A()}),u(f)),r.useEffect((function(){return window.addEventListener("load",z),window.addEventListener("resize",z),function(){window.removeEventListener("load",z),window.removeEventListener("resize",z)}}),[z]),r.useEffect((function(){var e=m.current;return e.addEventListener("scroll",A),function(){return e.removeEventListener("scroll",A)}}),[A]),r.useEffect((function(){if(E)return window.addEventListener("mousemove",_),function(){return window.removeEventListener("mousemove",_)}}),[E,_]),r.useEffect((function(){return window.addEventListener("mouseup",N),document.documentElement.addEventListener("mouseleave",N),function(){window.removeEventListener("mouseup",N),document.documentElement.removeEventListener("mouseleave",N)}}),[N]),q?t.jsx(l.MinimapContainer,Object.assign({},p,{children:t.jsx(l.Minimap,Object.assign({id:"minimap",sliderWidth:c},{children:t.jsxs(l.SliderRange,Object.assign({ref:b,onMouseDown:B,rangeWidth:c-2*d,padding:d},{children:[t.jsx(l.SliderContentWrapper,Object.assign({contentWidth:c-2*d},{children:k}),void 0),t.jsx(l.SliderController,{id:"sliderController",onMouseDown:B,ref:v,controllerWidth:a},void 0)]}),void 0)}),void 0)}),void 0):null}));c.displayName="Minimap",c.defaultProps={minimapWidth:126,controllerWidth:40,sliderContentPadding:8,minimapDimensionDeps:[]};var a=Object.assign(c,{Style:l.MinimapContainer});exports.Minimap=a;
