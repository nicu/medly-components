"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var o=e(require("@babel/runtime/helpers/objectWithoutProperties")),i=require("react/jsx-runtime"),n=require("react"),t=(e(n),e(require("@babel/runtime/helpers/slicedToArray"))),l=e(require("@babel/runtime/helpers/toConsumableArray")),r=require("../../context/TableComponentsCommonProps.context.js"),s=require("../../helpers.js"),d=require("../../GroupCell/GroupCell.styled.js"),a=require("../Cell/Cell.js"),u=require("../Cell/ExtendedRowCell/ExtendedRowCell.js"),c=require("../Cell/RowActionsCell/RowActionsCell.js"),w=require("../Cell/RowHoverActionsCell/RowHoverActionsCell.js"),C=require("./Row.styled.js"),R=n.memo((function(e){var R=n.useState(!1),b=t(R,2),f=b[0],p=b[1],m=e.id,h=e.data,v=e.isNavigated,x=void 0!==v&&v,S=e.isRowExpandedFromKeyboard,g=e.isRowCollapsedFromKeyboard,j=e.showShadowAfterFrozenElement,y=e.selectedRowIds,E=e.onRowSelection,k=o(e,["id","data","isNavigated","isRowExpandedFromKeyboard","isRowCollapsedFromKeyboard","showShadowAfterFrozenElement","selectedRowIds","onRowSelection"]),q=n.useContext(r.TableComponentsCommonPropsContext),A=q.keyBindings,D=q.columns,T=q.isLoading,M=q.onRowClick,z=q.hiddenDivRef,F=q.addColumnMaxSize,G=q.rowClickDisableKey,K=q.rowSelectionDisableKey,N=q.defaultRowExpandKey,I=q.isRowSelectable,H=q.isRowExpandable,L=q.isGroupedTable,O=q.showRowWithCardStyle,P=q.size,W=q.expandedRowComponent,_=q.withRowSeparators,B=q.rowHoverActions,V=n.useState(N&&h[N]),J=t(V,2),Q=J[0],U=J[1],X=n.useMemo((function(){return!T&&y.includes(m)}),[m,T,y]),Y=n.useMemo((function(){return G&&h[G]}),[h,G]),Z=n.useMemo((function(){return K&&h[K]}),[h,K]),$=n.useCallback((function(){return E(m)}),[m,E]),ee=n.useCallback((function(){return U((function(e){return!e}))}),[]),oe=n.useMemo((function(){return T||!M||Y?void 0:function(){return M(h)}}),[T,h,M,Y,H,ee]),ie=n.useCallback((function(){return p(!0)}),[]),ne=n.useCallback((function(){return p(!1)}),[]),te=n.useRef(null),le=n.useCallback((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:D,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o.reduce((function(o,t){var r="".concat(n&&"".concat(n,".")).concat(t.field);return"row-actions"===t.field?o:[].concat(l(o),[t.children?i.jsx(d.GroupCell,Object.assign({as:n?"div":"td",hidden:t.hidden,gridTemplateColumns:s.getGridTemplateColumns(t.children)},{children:le(e[t.field],t.children,t.field)}),t.field):i.jsx(a,{rowId:m,config:t,as:n?"div":"td",isLoading:T,rowData:e,data:s.getNestedValue(e,t.field),addColumnMaxSize:F,isRowClickDisabled:Y,dottedFieldName:r,tableSize:P,hiddenDivRef:z},r)])}),[])}),[m,h,T,D,F,Y,z,P]);n.useEffect((function(){var e,o,i;x&&(I&&!Z?null===(e=te.current)||void 0===e||null===(o=e.querySelector("input"))||void 0===o||o.focus():null===(i=te.current)||void 0===i||i.focus())}),[x]),n.useEffect((function(){S&&U(!0)}),[S]),n.useEffect((function(){g&&U(!1)}),[g]);var re=n.useCallback((function(e){e.key===A.rowClick&&x&&oe&&oe()}),[x,oe]);return i.jsx(i.Fragment,{children:i.jsxs(C.Row,Object.assign({},k,{ref:te,tabIndex:Number(m),disabled:Y,onClick:oe,isSelected:X,isExpanded:Q,isExpandable:H,showRowWithCardStyle:O,gridTemplateColumns:s.getGridTemplateColumns(D),onMouseEnter:ie,onMouseLeave:ne,withRowSeparators:_,isNavigated:x,onKeyDown:re},{children:[(I||H)&&i.jsx(c.RowActionsCell,{tableSize:P,isLoading:T,isRowExpanded:Q,isGroupedTable:L,isRowExpandable:H,isRowSelected:X,isRowSelectable:I,isRowSelectionDisabled:Z,onRowSelection:$,onRowExpansionIconClick:ee,showShadowAtRight:j,isNavigated:x},void 0),le(h),H&&W&&i.jsx(u.ExtendedRowCell,{rowId:m,rowData:h,tableSize:P,isRowExpanded:Q,isRowSelected:X,isGroupedTable:L,expandedRowComponent:W,isRowClickDisabled:Y,showShadowAtRight:j},void 0),void 0!==B&&!Y&&!T&&i.jsx(w.RowHoverActionsCell,Object.assign({show:f},{children:i.jsx(B,{rowData:h,rowId:m},void 0)}),void 0)]}),void 0)},void 0)}));R.displayName="Row",exports.Row=R;
