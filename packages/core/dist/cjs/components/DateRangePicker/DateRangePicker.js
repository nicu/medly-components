"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=e(require("@babel/runtime/helpers/objectWithoutProperties")),a=require("react/jsx-runtime"),r=require("react"),n=(e(r),e(require("@babel/runtime/helpers/slicedToArray"))),o=require("@medly-components/utils"),l=require("../TextField/Styled/OuterWrapper.styled.js"),i=require("./CustomDateRangeOptions/CustomDateRangeOptions.styled.js"),s=require("./DateRangeCalendar/DateRangeCalendar.js"),u=require("./types.js"),d=require("./helpers/dateRangeHelpers.js"),c=require("./DateRangeTextFields/DateRangeTextFields.js"),p=r.memo((function(e){var p=e.id,D=e.value,m=e.minWidth,T=e.fullWidth,v=e.displayFormat,f=e.startDateLabel,h=e.endDateLabel,R=e.errorText,b=e.helperText,g=e.variant,C=e.disabled,S=e.showDecorators,y=e.size,A=e.onBlur,x=e.minSelectableDate,E=e.maxSelectableDate,P=e.popoverPlacement,O=e.onChange,j=e.required,w=e.validator,q=e.withSingleMonth,F=e.showTooltipForHelperAndErrorText,k=e.customDateRangeOptions,L=e.onPopupClose,M=t(e,["id","value","minWidth","fullWidth","displayFormat","startDateLabel","endDateLabel","errorText","helperText","variant","disabled","showDecorators","size","onBlur","minSelectableDate","maxSelectableDate","popoverPlacement","onChange","required","validator","withSingleMonth","showTooltipForHelperAndErrorText","customDateRangeOptions","onPopupClose"]),N=r.useRef(null),_=r.useRef(null),W=r.useRef(null),z=r.useRef(null),H=r.useState(!1),I=n(H,2),U=I[0],B=I[1],G=r.useState(u.PopoverTypes.CALENDAR),K=n(G,2),V=K[0],J=K[1],Q=r.useState("START_DATE"),X=n(Q,2),Y=X[0],Z=X[1],$=r.useCallback((function(e){var t;return null===(t=("START_DATE"===e?N:_).current)||void 0===t?void 0:t.focus()}),[]),ee=o.useKeyPress("Tab",!0,W),te=r.useMemo((function(){return null!=m?m:(null==k?void 0:k.length)?"37.2rem":"33.8rem"}),[k,m]),ae=r.useCallback((function(){C||(V===u.PopoverTypes.CUSTOM_RANGE_OPTIONS?B((function(e){return!e})):(J(u.PopoverTypes.CUSTOM_RANGE_OPTIONS),B(!0)))}),[C,V]),re=r.useCallback((function(e){J(u.PopoverTypes.CALENDAR),B(e)}),[]),ne=r.useCallback((function(e){if(e.value===u.DateRangeSelectionEnum.CUSTOM)$("START_DATE"),J(u.PopoverTypes.CALENDAR),B(!0);else{var t=d.dateRangeHelpers[e.value]();x&&t.startDate&&t.startDate<x&&(t.startDate=x),E&&t.endDate&&t.endDate>E&&(t.endDate=E),O&&O(t),B(!1)}}),[O,$]);return o.useOuterClickNotifier((function(e){B(!1),U&&L&&L(),U&&z.current&&z.current(e)}),W),o.useUpdateEffect((function(){return $(Y)}),[Y]),r.useEffect((function(){var e=document.activeElement;ee&&"START_DATE"!==e.name&&"END_DATE"!==e.name&&B(!1)}),[ee]),a.jsxs(l.OuterWrapper,Object.assign({id:"".concat(p,"-wrapper"),ref:W,fullWidth:T,minWidth:te},M,{onBlur:A},{children:[a.jsx(c.DateRangeTextFields,{id:p,size:y,required:j,variant:g,errorText:R,helperText:b,disabled:C,showDecorators:S,isActive:U,activePopover:V,validator:w,startDateLabel:f,endDateLabel:h,selectedDates:D,onDateChange:O,displayFormat:v,onCalendarIconClick:re,setFocusedElement:Z,startDateRef:N,endDateRef:_,showTooltipForHelperAndErrorText:F,onCustomRangeIconClick:ae,showChevronIcon:k.length>0,outerClickValidator:z},void 0),U&&(V===u.PopoverTypes.CALENDAR?a.jsx(s.DateRangeCalendar,{id:"".concat(p,"-calendar"),size:y,placement:P,selectedDates:D,setActive:re,withSingleMonth:q,focusElement:$,onDateSelection:O,focusedElement:Y,setFocusedElement:Z,minSelectableDate:x,maxSelectableDate:E},void 0):a.jsx(i.CustomDateRangeOptions,{id:"".concat(p,"-custom-date-range-options"),size:y,variant:g,onOptionClick:ne,options:k,placement:P},void 0))]}),void 0)}));p.displayName="DateRangePicker",p.defaultProps={id:"medly-date-range-picker",size:"M",variant:"filled",startDateLabel:"From",endDateLabel:"To",displayFormat:"MM-dd-yyyy",popoverPlacement:"bottom-start",withSingleMonth:!1,minSelectableDate:new Date(1901,0,1),maxSelectableDate:new Date(2100,11,1),showDecorators:!0,customDateRangeOptions:[]},exports.DateRangePicker=p;
