"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react"),a=(e(t),e(require("@babel/runtime/helpers/slicedToArray"))),r=require("@medly-components/utils"),n=e(require("@babel/runtime/helpers/defineProperty")),l=require("../../Calendar/helper.js"),i=require("../../TextField/getMaskedValue.js"),s=require("../helpers/getFormattedDate.js");function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function u(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}exports.useDateRangeTextFieldsHandlers=function(e){var n=e.disabled,o=e.displayFormat,c=e.isActive,d=e.startDateRef,D=e.endDateRef,p=e.errorText,v=e.required,f=e.validator,g=e.selectedDates,b=e.onCalendarIconClick,T=e.onDateChange,m=e.setFocusedElement,O=t.useState(""),y=a(O,2),C=y[0],j=y[1],S=t.useState(""),h=a(S,2),k=h[0],E=h[1],P=t.useState(""),x=a(P,2),A=x[0],F=x[1],M=t.useMemo((function(){return o.replace(new RegExp("\\/|\\-","g")," $& ").toUpperCase()}),[o]),R=t.useState(M),q=a(R,2),I=q[0],w=q[1],V=t.useState(M),_=a(V,2),B=_[0],L=_[1],H=t.useMemo((function(){return!!p||!!C}),[p,C]),N=t.useCallback((function(e){return e.stopPropagation()}),[]),U=t.useCallback((function(e){var t;(e.stopPropagation(),n)||(b(!0),null===(t=d.current)||void 0===t||t.focus())}),[n]),W=t.useCallback((function(e){b(!0),m(e.target.name),e.target.setSelectionRange(e.target.value.length,e.target.value.length)}),[]),$=t.useCallback((function(e){var t=i.getMaskedValue(e,M),a=r.parseToDate(e.target.value,o),n="".concat(t).concat(M.substr(t.length));"START_DATE"===e.target.name?(E(t),w(n),"Invalid Date"!==a.toString()&&(m("END_DATE"),T(u(u({},g),{},{startDate:a})))):(F(t),L(n),"Invalid Date"!==a.toString()&&(m("START_DATE"),T(u(u({},g),{},{endDate:a}))))}),[g,T]),z=t.useCallback((function(e){e.preventDefault();var t=e.target,a=t.value&&"Invalid Date"===r.parseToDate(t.value,o).toString();a&&(j(a?"Enter valid date":""),T(u(u({},g),"START_DATE"===t.name?{startDate:null}:{endDate:null})))}),[g,T]),G=t.useCallback((function(e){var t;e.preventDefault();var a=e.target,n=f&&f(g,e)||"",l=a.value&&"Invalid Date"===r.parseToDate(a.value,o).toString(),i=f?n:a.validationMessage||(l?"Enter valid date":"");j(i),f&&(null===(t=("START_DATE"===a.name?d:D).current)||void 0===t||t.setCustomValidity(n))}),[f,o,g,T]),J=t.useCallback((function(e){var t,a,r=f&&f(g,e)||"",n=!v||g.startDate||g.endDate?"":"Please fill in this field.";(j(f?r:n),f)&&(null===(t=d.current)||void 0===t||t.setCustomValidity(r),null===(a=D.current)||void 0===a||a.setCustomValidity(r))}),[f,g,v]);return t.useEffect((function(){var e=g.startDate?s.getFormattedDate(g.startDate,o):"",t=g.endDate?s.getFormattedDate(g.endDate,o):"";E(e),F(t),w(e||M),L(t||M),l.isValidDate(g.startDate)&&l.isValidDate(g.endDate)&&j("")}),[c,g,o]),{mask:M,builtInErrorMessage:C,startDateText:k,endDateText:A,startDateMaskLabel:I,endDateMaskLabel:B,isErrorPresent:H,stopPropagation:N,onIconClick:U,onTextFieldFocus:W,handleTextChange:$,validateOnTextFieldBlur:z,validateOnTextFieldInvalid:G,validateOnWrapperBlur:J}};
