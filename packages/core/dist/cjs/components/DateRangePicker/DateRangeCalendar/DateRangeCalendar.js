"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var t=require("react/jsx-runtime"),n=require("react"),a=(e(n),e(require("@babel/runtime/helpers/slicedToArray"))),r=require("@medly-components/icons"),o=e(require("@babel/runtime/helpers/defineProperty")),i=require("../../Calendar/Calendar.styled.js"),c=require("../../Calendar/helper.js"),s=require("../../Calendar/MonthAndYearSelection/MonthAndYearSelection.js"),l=require("./DateRangeCalendar.styled.js"),d=require("./Month/Month.js");function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var D=n.memo((function(e){var o=e.id,u=e.size,D=e.setActive,g=e.placement,m=e.selectedDates,b=e.focusedElement,f=e.focusElement,v=e.setFocusedElement,j=e.onDateSelection,p=e.minSelectableDate,y=e.maxSelectableDate,M=e.withSingleMonth,O=m.startDate,C=m.endDate,S=n.useState(null),x=a(S,2),A=x[0],w=x[1],k=n.useState("move-in-left"),P=a(k,2),E=P[0],q=P[1],Y=n.useState(c.getMonthAndYearFromDate(O||new Date)),T=a(Y,2),R=T[0],N=R.month,_=R.year,F=T[1],z=n.useMemo((function(){return c.getNextMonthAndYear(N,_)}),[N,_]),H=z.month,I=z.year,K=n.useCallback((function(){return q("move-out-left")}),[]),L=n.useCallback((function(){return q("move-out-right")}),[]),W=n.useCallback((function(e){"START_DATE"===b?(m.endDate&&e>=m.endDate?j({startDate:m.endDate,endDate:e}):j(h(h({},m),{},{startDate:e})),v("END_DATE")):(m.startDate&&e<=m.startDate?j({startDate:e,endDate:m.startDate}):j(h(h({},m),{},{endDate:e})),v("START_DATE"))}),[m,b]),B=n.useCallback((function(){f(b),D(!0)}),[b]),G=n.useCallback((function(e){B(),F(e)}),[b]),J=n.useCallback((function(){"move-out-left"!==E&&"move-out-right"!==E||("move-out-left"===E?(F((function(e){return c.getNextMonthAndYear(e.month,e.year)})),q("move-in-left")):(F((function(e){return c.getPreviousMonthAndYear(e.month,e.year)})),q("move-in-right")))}),[E]),Q={startDate:O,endDate:C,minSelectableDate:p,maxSelectableDate:y,hoveredDate:A,setHoveredDate:w,onChange:W};return n.useEffect((function(){m.startDate&&!m.endDate&&m.startDate.getMonth()!==N&&m.startDate.getMonth()!==H&&O&&F(c.getMonthAndYearFromDate(O)),m.endDate&&!m.startDate&&m.endDate.getMonth()!==N&&m.endDate.getMonth()!==H&&C&&F(c.getPreviousMonthAndYear(C.getMonth(),C.getFullYear()))}),[m.startDate,m.endDate]),t.jsxs(l.DateRangeCalendar,Object.assign({id:o,size:u,placement:g,onClick:B,withSingleMonth:M},{children:[t.jsxs(l.Header,{children:[M&&t.jsx(s.MonthAndYearSelection,{id:o,month:N,year:_,onChange:G,minSelectableDate:p,maxSelectableDate:y},void 0),t.jsx(i.MonthNavigation,Object.assign({id:"".concat(o,"-navigation-backward"),onClick:L},{children:t.jsx(r.KeyboardArrowLeftIcon,{title:"".concat(o,"-navigation-backward-icon")},void 0)}),void 0),t.jsx(i.MonthNavigation,Object.assign({id:"".concat(o,"-navigation-forward"),onClick:K},{children:t.jsx(r.KeyboardArrowRightIcon,{title:"".concat(o,"-navigation-forward-icon")},void 0)}),void 0)]},void 0),t.jsxs(l.MonthsWrapper,Object.assign({id:"".concat(o,"-months-wrapper"),slideDirection:E,onAnimationEnd:J},{children:[t.jsx(d.Month,Object.assign({id:"".concat(o,"-").concat(N,"-month"),month:N,year:_},Q,{hideMonthText:M}),void 0),!M&&t.jsx(d.Month,Object.assign({id:"".concat(o,"-").concat(H,"-month"),month:H,year:I},Q),void 0)]}),N)]}),void 0)}));D.displayName="DateRangeCalendar";var g=Object.assign(D,{Style:l.DateRangeCalendar});exports.DateRangeCalendar=g;
